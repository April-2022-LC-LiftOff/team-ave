{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/occurrence.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/_services/token-storage.service\";\n\nfunction OccurrenceListComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const occurrence_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(occurrence_r1.date);\n  }\n}\n\nexport class OccurrenceListComponent {\n  constructor(logService, _route, tokenStorage) {\n    this.logService = logService;\n    this._route = _route;\n    this.tokenStorage = tokenStorage;\n    this.isSuccessful = false;\n    this.isLoggedin = false;\n    this.errorMessage = '';\n    this.roles = [];\n  }\n\n  ngOnInit() {\n    if (this.tokenStorage.getToken) {\n      this.isLoggedin = true;\n      this.roles = this.tokenStorage.getUser().roles;\n    }\n\n    this.currentUser = this.tokenStorage.getUser();\n    this.userId = this.tokenStorage.getUser().id;\n    console.log(this.currentUser);\n    this.getOccurrenceList();\n  }\n\n  getOccurrenceList() {\n    this.logService.getOccurrenceListByUserId(this.userId).subscribe(data => {\n      this.occurrences = data;\n      console.log(this.occurrences);\n    }, err => {\n      this.errorMessage = err.error.message;\n      console.log(this.errorMessage + \": Hi Im an error. but im not gonna tell you why...\");\n      this.isSuccessful = false;\n    });\n  }\n\n}\n\nOccurrenceListComponent.ɵfac = function OccurrenceListComponent_Factory(t) {\n  return new (t || OccurrenceListComponent)(i0.ɵɵdirectiveInject(i1.OccurrenceService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.TokenStorageService));\n};\n\nOccurrenceListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OccurrenceListComponent,\n  selectors: [[\"app-occurrence-list\"]],\n  decls: 5,\n  vars: 4,\n  consts: [[1, \"occ-list\"], [4, \"ngFor\", \"ngForOf\"]],\n  template: function OccurrenceListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0);\n      i0.ɵɵtemplate(3, OccurrenceListComponent_div_3_Template, 3, 1, \"div\", 1);\n      i0.ɵɵpipe(4, \"async\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate1(\" Occurrences for \", ctx.currentUser.username, \"?\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 2, ctx.occurrences));\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJvY2N1cnJlbmNlLWxpc3QuY29tcG9uZW50LmNzcyJ9 */\"]\n});","map":{"version":3,"sources":["C:/Users/theet/Desktop/liftoff_capstone/team-ave/frontend/src/app/occurrence/occurrence-list/occurrence-list.component.ts"],"names":["i0","i1","i2","i3","OccurrenceListComponent_div_3_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","occurrence_r1","$implicit","ɵɵadvance","ɵɵtextInterpolate","date","OccurrenceListComponent","constructor","logService","_route","tokenStorage","isSuccessful","isLoggedin","errorMessage","roles","ngOnInit","getToken","getUser","currentUser","userId","id","console","log","getOccurrenceList","getOccurrenceListByUserId","subscribe","data","occurrences","err","error","message","ɵfac","OccurrenceListComponent_Factory","t","ɵɵdirectiveInject","OccurrenceService","Router","TokenStorageService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","OccurrenceListComponent_Template","ɵɵtemplate","ɵɵpipe","ɵɵtextInterpolate1","username","ɵɵproperty","ɵɵpipeBind1","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/service/occurrence.service\";\r\nimport * as i2 from \"@angular/router\";\r\nimport * as i3 from \"src/app/_services/token-storage.service\";\r\nfunction OccurrenceListComponent_div_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\");\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const occurrence_r1 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(occurrence_r1.date);\r\n} }\r\nexport class OccurrenceListComponent {\r\n    constructor(logService, _route, tokenStorage) {\r\n        this.logService = logService;\r\n        this._route = _route;\r\n        this.tokenStorage = tokenStorage;\r\n        this.isSuccessful = false;\r\n        this.isLoggedin = false;\r\n        this.errorMessage = '';\r\n        this.roles = [];\r\n    }\r\n    ngOnInit() {\r\n        if (this.tokenStorage.getToken) {\r\n            this.isLoggedin = true;\r\n            this.roles = this.tokenStorage.getUser().roles;\r\n        }\r\n        this.currentUser = this.tokenStorage.getUser();\r\n        this.userId = this.tokenStorage.getUser().id;\r\n        console.log(this.currentUser);\r\n        this.getOccurrenceList();\r\n    }\r\n    getOccurrenceList() {\r\n        this.logService.getOccurrenceListByUserId(this.userId).subscribe(data => {\r\n            this.occurrences = data;\r\n            console.log(this.occurrences);\r\n        }, err => {\r\n            this.errorMessage = err.error.message;\r\n            console.log(this.errorMessage + \": Hi Im an error. but im not gonna tell you why...\");\r\n            this.isSuccessful = false;\r\n        });\r\n    }\r\n}\r\nOccurrenceListComponent.ɵfac = function OccurrenceListComponent_Factory(t) { return new (t || OccurrenceListComponent)(i0.ɵɵdirectiveInject(i1.OccurrenceService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.TokenStorageService)); };\r\nOccurrenceListComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: OccurrenceListComponent, selectors: [[\"app-occurrence-list\"]], decls: 5, vars: 4, consts: [[1, \"occ-list\"], [4, \"ngFor\", \"ngForOf\"]], template: function OccurrenceListComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"h1\");\r\n        i0.ɵɵtext(1);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"div\", 0);\r\n        i0.ɵɵtemplate(3, OccurrenceListComponent_div_3_Template, 3, 1, \"div\", 1);\r\n        i0.ɵɵpipe(4, \"async\");\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵtextInterpolate1(\" Occurrences for \", ctx.currentUser.username, \"?\");\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 2, ctx.occurrences));\r\n    } }, styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJvY2N1cnJlbmNlLWxpc3QuY29tcG9uZW50LmNzcyJ9 */\"] });\r\n"]},"metadata":{},"sourceType":"module"}